#include <stdio.h>
#include <ws2811.h>

// Number of LEDs in the strip
#define LED_COUNT 7

// GPIO pin number for the LED strip
#define LED_PIN 18

// Configuration for the LED strip
ws2811_t ledStrip = {
    .freq = WS2811_TARGET_FREQ,
    .dmanum = 7,
    .channel = {
        [0] = {
            .gpionum = LED_PIN,
            .count = LED_COUNT,
            .invert = 0,
            .brightness = 255,
            .strip_type = WS2811_STRIP_RGB,
        },
        // Add additional channels here if needed
    },
};

int main() {
    // Initialize the LED strip
    if (ws2811_init(&ledStrip) != WS2811_SUCCESS) {
        fprintf(stderr, "Failed to initialize WS2811 LED strip\n");
        return 1;
    }

    // Fill the LED strip with a color (white in this case)
    for (int i = 0; i < LED_COUNT; i++) {
        ledStrip.channel[0].leds[i] = 0xFFFFFF; // RGB color: white
    }

    // Render the LED strip
    if (ws2811_render(&ledStrip) != WS2811_SUCCESS) {
        fprintf(stderr, "Failed to render WS2811 LED strip\n");
        ws2811_fini(&ledStrip);
        return 1;
    }

    // Clean up
    ws2811_fini(&ledStrip);

    return 0;
}
